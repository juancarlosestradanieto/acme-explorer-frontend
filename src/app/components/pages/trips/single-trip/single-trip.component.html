
<div class="row">

  <div class="col-md-2 offset-md-10">

    <button type="button" class="btn btn-success" *ngIf="trip && (activeRole == 'MANAGER')" routerLink="/trips/{{trip.id}}/edit/">
      <i class="fa-solid fa-edit"></i>
      Edit
    </button>
    
  </div>
</div>

<div *ngIf="(sponsorships_loaded | async)" class="card">
    <div class="container">
  
      <ngb-carousel *ngIf="sponsorship.getBanner().length > 0" class="card-img-top">
        <ng-template ngbSlide *ngFor="let banner of sponsorship.getBanner(); let i = index">
          <div class="wrapper">
            <img [src]="banner[i]" alt="Random first slide">
          </div>
          <div class="carousel-caption">
            <h3>Title Goes Here</h3>
            <p>Consectetur tortor volutpat pretium.</p>
          </div>
        </ng-template>
      </ngb-carousel>
      
      <img *ngIf="sponsorship.getBanner().length == 0" src="assets/images/trips/default-trip.jpg" class="card-img-top default-trip-image" alt="...">

      <p>{{sponsorship.getPage()}}</p>
  
    </div>
  </div>

<div *ngIf="trip" class="card">
  <div class="container">

    <ngb-carousel *ngIf="trip.getPictures().length > 0" class="card-img-top">
      <ng-template ngbSlide *ngFor="let picture of trip.getPictures()">
        <div class="wrapper">
          <img [src]="picture['picture']" alt="Random first slide">
        </div>
        <div class="carousel-caption">
          <!--
          <h3>Title Goes Here</h3>
          <p>Consectetur tortor volutpat pretium.</p>
          -->
        </div>
      </ng-template>
    </ngb-carousel>
    
    <img *ngIf="trip.getPictures().length == 0" src="assets/images/trips/default-trip.jpg" class="card-img-top default-trip-image" alt="...">

  </div>

  <div class="card-body">
    <h5 class="card-title">{{trip.getTitle()}}</h5>
    <p class="card-text">{{trip.getDescription()}}</p>
  </div>
  <ul class="list-group list-group-flush">
    <li class="list-group-item"><b>Price</b>: {{trip.getPrice()}}</li>
    <li class="list-group-item"><b>Start date</b>: {{trip.getStartDate() | date: 'dd/MM/yyyy'}}</li>
    <li class="list-group-item"><b>End date</b>: {{trip.getEndDate() | date: 'dd/MM/yyyy'}}</li>
  </ul>
  <div class="card-body">
    <button type="button" class="btn btn-primary" *ngIf="activeRole == 'EXPLORER' && trip.getStartDate().toString() > currentDateTime.toISOString() && !trip.isCanceled()"
      routerLink="/trip/{{trip.id}}/applications/new">
      <i class="fa-solid fa-envelope"></i>
      {{'applications.apply-for' | translate}}
    </button>
    <button type="button" class="btn btn-primary" *ngIf="activeRole == 'MANAGER'  && user!.id == trip.getManagerId()" routerLink="/trips/{{trip.id}}/applications/">
      <i class="fa-solid fa-envelope"></i>
      {{'applications.title-plural' | translate}}
    </button>

  </div>
  <div class="card-body">

    <div class="card">
      <div class="card-body">
        <h5 class="card-title">Stages</h5>

        <ul>
          <li *ngFor="let stage of trip.getStages()">
            <h6 class="card-subtitle mb-2 text-muted">{{stage.getTitle()}} - Price: {{stage.getPrice()}}</h6>
            <p class="card-text">{{stage.getDescription()}}</p>
          </li>
        </ul>

      </div>
    </div>

  </div>
</div>